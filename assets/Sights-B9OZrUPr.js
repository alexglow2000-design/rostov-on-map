import{u as I,j as t,r as a,b as M}from"./index-DvGZINzj.js";import{B as S}from"./Banner-Bjlp33XU.js";import{a as k}from"./index-C8E2SS66.js";import"./Button-Cm4g-rHj.js";const D="_header_srxg4_1",B="_textHeader_srxg4_13",P="_sightContaier_srxg4_21",H="_footer_srxg4_29",y="_iconWrapper_srxg4_39",G="_dropDownContainer_srxg4_53",R="_dropDownList_srxg4_61",A="_dropDownItem_srxg4_71",s={header:D,textHeader:B,sightContaier:P,footer:H,iconWrapper:y,dropDownContainer:G,dropDownList:R,dropDownItem:A},W="_sightList_1x718_1",z="_sightItem_1x718_13",$="_textSight_1x718_27",F="_rateBox_1x718_35",q="_containerColumn_1x718_49",J="_img_1x718_59",K="_textGroup_1x718_67",O="_textRate_1x718_79",Q="_centerIMG_1x718_87",T="_locationPlace_1x718_101",o={sightList:W,sightItem:z,textSight:$,rateBox:F,containerColumn:q,img:J,textGroup:K,textRate:O,centerIMG:Q,locationPlace:T},U=({id:l,img:x,title:i,rate:r,location:m})=>{const d=I();return t.jsx("div",{className:o.sightList,onClick:()=>d("/sight/"+l),children:t.jsxs("div",{className:o.sightItem,children:[t.jsxs("div",{className:o.containerColumn,children:[t.jsx("div",{className:o.centerIMG,children:t.jsx("img",{className:o.img,width:197,height:153,src:"https://rostov-on-map-api.onrender.com/static/"+x,alt:i})}),t.jsx("div",{className:o.textGroup,children:t.jsx("p",{className:o.textSight,children:i})})]}),t.jsx("div",{children:t.jsx("div",{className:o.rateBox,children:t.jsxs("p",{className:o.textRate,children:[r,"/5"]})})}),t.jsx("div",{className:o.locationPlace,children:t.jsx("p",{className:o.textSight,children:m})})]})})},V="_linkContainer_1g1py_1",X="_linkItem_1g1py_23",Y="_linkItemActive_1g1py_35",Z="_forPoiner_1g1py_47",c={linkContainer:V,linkItem:X,linkItemActive:Y,forPoiner:Z},b=({count:l,limit:x,changePage:i,currentPage:r})=>{const m=Math.ceil(l/x),d=[];for(let n=0;n<m;n++)d.push(n+1);return t.jsxs("div",{className:c.linkContainer,children:[r!==1?t.jsx("div",{className:c.forPoiner,children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",onClick:()=>i(r-1),children:t.jsx("path",{d:"M19 10L1 10M1 10L9.5 1.5M1 10L9.5 18.5",stroke:"#EEEEEE","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})}):t.jsx("div",{className:c.forPoiner,children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:t.jsx("path",{d:"M19 10L1 10M1 10L9.5 1.5M1 10L9.5 18.5",stroke:"#eeeeeea8","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})}),d.map(n=>t.jsx("p",{className:n===r?c.linkItem:c.linkItemActive,onClick:()=>i(n),children:n},n)),r!==l?t.jsx("div",{className:c.forPoiner,children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",onClick:()=>i(r+1),children:t.jsx("path",{d:"M1 10L19 10M19 10L10.5 18.5M19 10L10.5 1.5",stroke:"#EEEEEE","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})}):t.jsx("div",{className:c.forPoiner,children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:t.jsx("path",{d:"M1 10L19 10M19 10L10.5 18.5M19 10L10.5 1.5",stroke:"#eeeeeea8","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})})]})},tt=a.memo(()=>{const[l]=M(),x=l.get("location")||"Все",[i,r]=a.useState([]),[m,d]=a.useState(0),[n,_]=a.useState(!0),[j,w]=a.useState(null),[g,f]=a.useState(x),[N,v]=a.useState(!1),u=5,[p,L]=a.useState(1),C=["Все","Железнодорожный","Пролетарский","Советский","Кировский","Ленинский"],E=e=>{console.log(e),L(e),console.log(e)};return a.useEffect(()=>{(async()=>{try{_(!0),w(null);let h;g!=="Все"?h=await k(g,u,p):h=await k(),r(h.rows),d(h.count)}catch(h){w(h.message||"Ошибка при загрузке списка достопримечательностей")}finally{_(!1)}})()},[p,g]),n?t.jsx("div",{children:"Загрузка списка достопримечательностей..."}):j?t.jsxs("div",{children:["Ошибка: ",j]}):t.jsxs("div",{className:s.sightContaier,children:[t.jsxs("div",{className:s.header,children:[t.jsx("div",{className:"",children:t.jsx("p",{className:s.textHeader,children:"Культурные объекты"})}),t.jsx("div",{className:"",children:t.jsx("p",{className:s.textHeader,children:"Оценка"})}),t.jsx("div",{className:"",children:t.jsx("p",{className:s.textHeader,children:"Район"})}),t.jsxs("div",{className:s.iconWrapper,onClick:()=>v(e=>!e),children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31",height:"23",viewBox:"0 0 31 23",fill:"none",children:t.jsx("path",{d:"M2.5 1.75H28.5M12.25 11.5H28.5M22 21.25H28.5",stroke:"#EEEEEE","stroke-width":"3.25","stroke-linecap":"round","stroke-linejoin":"round"})}),N&&t.jsx("div",{className:s.dropDownContainer,children:t.jsx("ul",{className:s.dropDownList,children:C.map(e=>t.jsx("li",{className:s.dropDownItem,onClick:()=>{f(e),v(!1)},children:e},e))})})]})]}),t.jsx("div",{className:s.sightList,children:i&&i.map(e=>t.jsx(U,{id:e.sight_id,title:e.title,img:e.img,location:e.location,rate:e.rate},e.sight_id))}),t.jsx("div",{className:s.footer,children:t.jsx(b,{count:m,limit:u,changePage:E,currentPage:p})})]})}),et="/rostov-on-map/assets/Rectangle%204-3-tz7tmck-.jpg",rt=()=>t.jsxs(t.Fragment,{children:[t.jsx(S,{size:"sm",img:et,withButton:!1,title:"Открой Ростов по новому",description:""}),t.jsx(tt,{})]});export{rt as default};
